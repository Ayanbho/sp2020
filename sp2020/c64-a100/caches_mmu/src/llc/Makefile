### Makefile for the LLC project
### Generated by Bluespec Workstation on Wed Dec 11 04:14:07 IST 2019

default: full_clean compile link simulate

.PHONY: compile
compile:
	@echo Compiling...
	@mkdir -p info_dir
	@mkdir -p verilog
	bsc -u -verilog -elab -vdir verilog -bdir info_dir -info-dir info_dir -keep-fires -p .:%/Prelude:%/Libraries:%/Libraries/BlueNoC:./../ProtoGen:./../coherence_controllers:./../vcu118_singlecore/caches_mmu/src:./../../fabrics/shaktilink/coherence -g mkllc_bank  llc_cache.bsv 
	@echo Compilation finished

.PHONY: link
link:
	@echo Linking...
	bsc -e mkllc_bank -verilog -o ./out -vdir verilog  -vsim cvc  -keep-fires verilog/mkllc_bank.v
	@echo Linking finished

.PHONY: simulate
simulate:
	@echo Simulation...
	./out 
	@echo Simulation finished

.PHONY: clean
clean:
	exec rm -f info_dir/mem_config.bo info_dir/llc_types.bo info_dir/llc_cache.bo info_dir/replacement_cache.bo info_dir/coherence_types.bo info_dir/bram_1rw.bo info_dir/cache_controller.bo info_dir/Semi_FIFOF.bo info_dir/bram_1r1w.bo info_dir/ShaktiLink_Types.bo
	exec rm -f info_dir/mk_cache_controller.ba info_dir/mkllc_bank.ba info_dir/module_func_Dict.ba info_dir/module_func_C1.ba

.PHONY: full_clean
full_clean:
	rm -f info_dir/mem_config.bo info_dir/llc_types.bo info_dir/llc_cache.bo info_dir/replacement_cache.bo info_dir/coherence_types.bo info_dir/bram_1rw.bo info_dir/cache_controller.bo info_dir/Semi_FIFOF.bo info_dir/bram_1r1w.bo info_dir/ShaktiLink_Types.bo
	rm -f info_dir/mk_cache_controller.ba info_dir/mkllc_bank.ba info_dir/module_func_Dict.ba info_dir/module_func_C1.ba
	rm -f verilog/mk_cache_controller.v
	rm -f verilog/mkllc_bank.v
	rm -f verilog/module_func_Dict.v
	rm -f verilog/module_func_C1.v
